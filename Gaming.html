<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name= "viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Gaming</title>

	<style type="text/css">
		a:link, a:visited {
			text-decoration: none;
			color:#FFFFFF;
		}

		.global{
			margin: 0px; 
			padding: 0px;
			background-color: #FFFFFF;
		}
		#upper_bar{
			height: 10%;
			background-color: red;
		}

		.btn{
			height: 30px;
			width: 150px;
			box-shadow: darkgrey 2px 2px 5px;
			background-color:#8BE067;
			text-align: center;
			color: #FFFFFF;
			font-family:  Consolas, monaco, monospace;
			font-size: 20px;
			font-weight: bold;

		}
		#score_box{
			float: left;
			border-radius: 0 5px 5px 0;
		}

		#pause_btn{
			height: 30px;
			width: 50px;
			float:left;
			background-color: red;
		}

		#remaining_time{
			float:right;
			border-radius: 5px 0 0 5px; 
		}
		#game_box{
			margin: auto;
/*			width: 600px;
			height: 350px;*/
			margin-top: 1%;
			padding-bottom: 40%;
			width: 80%;
			height: 0;
			border: 3px solid blue;
			text-align: center;
			font-size: 50px;
			background-image: url(./image/game_test.png);
			background-size: cover;

		}

        #test_float {
        	/*margin-top: 30px;*/
            background-color: transparent;
            /*background-color:red;*/
            width: 200px;
            height: 200px;
            position: absolute;
            left: 50%;
			top: 50%;
			margin-top: -100px;
			margin-left: -100px;
			/*display: none;*/
            /*top: 0;*/
        }

		#cdnum{
			padding-top: 30px;
			text-align: center;
			color: #FFFFFF;
			font-family:Gill Sans, sans-serif;
			font-size: 80px;
			font-weight: 700;
		}

	
	</style>

	<script type="text/javascript">
		//var countdown=5;
		// var lvv=0;    //set origin level 

		function set_diffi()  {  
            var url=location.href;  
            var tmp1=url.split("?")[1];  
            var tmp2=tmp1.split("&")[0];  
            var tmp3=tmp2.split("=")[1];  
            var param1=tmp3;
			var lv=decodeURI(param1)
			if (lv==1) {lvv=1; countdown=20;} //parse then record current lv and correspongding game time
			if (lv==2) {lvv=2; countdown=5;}
			if (lv==3) {lvv=3; countdown=3;}

			// you can start to load the game here togeter with the countdown below, so that the game start while counter stopping .
			// in order to match the GAME START and the COUNTER STOP, you can change the timer "3000" below.

			t=1000;
			var i=setInterval("document.getElementById('cdnum').innerHTML--;", t);//countdown value -1, for 3 sec
			setTimeout(function() { 
							clearInterval( i ); //stop countdown
							document.getElementById('cdnum').innerHTML="Start!";// show "start" for another 1 sec
							setTimeout(function() { 
											document.getElementById('test_float').style.display="none";// hide the countdown box after 1 sec, stop the game
											settime();}, 1000);
									}, 3000); // change this timer 3000 to other value to match, where 1000 are equal to 1s.


		}

		function settime() { 
			if (countdown>=0) {
				document.getElementById('remaining_time').innerHTML="Time: "+countdown+"s";
				countdown--;  
				setTimeout(function() {settime()} ,1000);
			}
			else
				jump();
				// window.location.href = 'Result.html';		  
		}

		//jump to the result page with score and current difficulty level
        function jump()  
        {	//get secores
            var parm1=document.getElementById("score_box").innerHTML
			//pass scores(1st para) and current level(lvv)(2nd para) 
            var myurl="Result.html"+"?"+"parm1="+parm1+"&parm2="+lvv;  
            window.location.assign(encodeURI(myurl));  
        }  

		// score up with clicking
		function numPlus() {
                var p = document.getElementById('score_box');
                p.innerHTML++;
            }
		
	</script>


</head>
<body class="global" onload="set_diffi()"><!--  -->
	<div id="upper_bar">
		<div class="btn" id="score_box">0</div>
		<div id="pause_btn"> pause</div>
		<div class="btn" id="remaining_time"> <!-- Time: 60s --></div>

	</div>
	<input type="button" class="btn" id="btn" value="click here" onclick="numPlus()">
	<div id="game_box"></div>


	<div id="test_float">
		<div id="cdnum"> 3 </div>
	</div>
</body>
</html>